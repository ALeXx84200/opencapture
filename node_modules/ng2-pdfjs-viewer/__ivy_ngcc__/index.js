import { Component, ViewChild, Input, Output, EventEmitter, NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';

/**
 * @fileoverview added by tsickle
 * Generated from: ng2-pdfjs-viewer.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as Éµngcc0 from '@angular/core';

var _c0 = ["iframe"];
var PdfJsViewerComponent = /** @class */ (function () {
    function PdfJsViewerComponent() {
        this.onBeforePrint = new EventEmitter();
        this.onAfterPrint = new EventEmitter();
        this.onDocumentLoad = new EventEmitter();
        this.onPageChange = new EventEmitter();
        this.externalWindow = false;
        this.showSpinner = true;
        this.openFile = true;
        this.download = true;
        this.viewBookmark = true;
        this.print = true;
        this.fullScreen = true;
        //@Input() public showFullScreen: boolean;
        this.find = true;
        this.useOnlyCssZoom = false;
        this.errorOverride = false;
        this.errorAppend = true;
        this.diagnosticLogs = true;
    }
    Object.defineProperty(PdfJsViewerComponent.prototype, "page", {
        get: /**
         * @return {?}
         */
        function () {
            if (this.PDFViewerApplication) {
                return this.PDFViewerApplication.page;
            }
            else {
                if (this.diagnosticLogs)
                    console.warn("Document is not loaded yet!!!. Try to retrieve page# after full load.");
            }
        },
        set: /**
         * @param {?} _page
         * @return {?}
         */
        function (_page) {
            this._page = _page;
            if (this.PDFViewerApplication) {
                this.PDFViewerApplication.page = this._page;
            }
            else {
                if (this.diagnosticLogs)
                    console.warn("Document is not loaded yet!!!. Try to set page# after full load. Ignore this warning if you are not setting page# using '.' notation. (E.g. pdfViewer.page = 5;)");
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PdfJsViewerComponent.prototype, "pdfSrc", {
        get: /**
         * @return {?}
         */
        function () {
            return this._src;
        },
        set: /**
         * @param {?} _src
         * @return {?}
         */
        function (_src) {
            this._src = _src;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PdfJsViewerComponent.prototype, "PDFViewerApplicationOptions", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var pdfViewerOptions = null;
            if (this.externalWindow) {
                if (this.viewerTab) {
                    pdfViewerOptions = this.viewerTab.PDFViewerApplicationOptions;
                }
            }
            else {
                if (this.iframe.nativeElement.contentWindow) {
                    pdfViewerOptions = this.iframe.nativeElement.contentWindow.PDFViewerApplicationOptions;
                }
            }
            return pdfViewerOptions;
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(PdfJsViewerComponent.prototype, "PDFViewerApplication", {
        get: /**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var pdfViewer = null;
            if (this.externalWindow) {
                if (this.viewerTab) {
                    pdfViewer = this.viewerTab.PDFViewerApplication;
                }
            }
            else {
                if (this.iframe.nativeElement.contentWindow) {
                    pdfViewer = this.iframe.nativeElement.contentWindow.PDFViewerApplication;
                }
            }
            return pdfViewer;
        },
        enumerable: false,
        configurable: true
    });
    /**
     * @param {?} viewerEvent
     * @return {?}
     */
    PdfJsViewerComponent.prototype.receiveMessage = /**
     * @param {?} viewerEvent
     * @return {?}
     */
    function (viewerEvent) {
        if (viewerEvent.data && viewerEvent.data.viewerId && viewerEvent.data.event) {
            /** @type {?} */
            var viewerId = viewerEvent.data.viewerId;
            /** @type {?} */
            var event_1 = viewerEvent.data.event;
            /** @type {?} */
            var param = viewerEvent.data.param;
            if (this.viewerId == viewerId) {
                if (this.onBeforePrint && event_1 == "beforePrint") {
                    this.onBeforePrint.emit();
                }
                else if (this.onAfterPrint && event_1 == "afterPrint") {
                    this.onAfterPrint.emit();
                }
                else if (this.onDocumentLoad && event_1 == "pagesLoaded") {
                    this.onDocumentLoad.emit(param);
                }
                else if (this.onPageChange && event_1 == "pageChange") {
                    this.onPageChange.emit(param);
                }
            }
        }
    };
    /**
     * @return {?}
     */
    PdfJsViewerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        window.addEventListener("message", this.receiveMessage.bind(this), false);
        if (!this.externalWindow) { // Load pdf for embedded views
            this.loadPdf();
        }
    };
    /**
     * @return {?}
     */
    PdfJsViewerComponent.prototype.refresh = /**
     * @return {?}
     */
    function () {
        this.loadPdf();
    };
    /**
     * @private
     * @return {?}
     */
    PdfJsViewerComponent.prototype.loadPdf = /**
     * @private
     * @return {?}
     */
    function () {
        if (!this._src) {
            return;
        }
        // console.log(`Tab is - ${this.viewerTab}`);
        // if (this.viewerTab) {
        //   console.log(`Status of window - ${this.viewerTab.closed}`);
        // }
        if (this.externalWindow && (typeof this.viewerTab === 'undefined' || this.viewerTab.closed)) {
            this.viewerTab = window.open('', '_blank', this.externalWindowOptions || '');
            if (this.viewerTab == null) {
                if (this.diagnosticLogs)
                    console.error("ng2-pdfjs-viewer: For 'externalWindow = true'. i.e opening in new tab to work, pop-ups should be enabled.");
                return;
            }
            if (this.showSpinner) {
                this.viewerTab.document.write("\n          <style>\n          .loader {\n            position: fixed;\n            left: 40%;\n            top: 40%;\n            border: 16px solid #f3f3f3;\n            border-radius: 50%;\n            border-top: 16px solid #3498db;\n            width: 120px;\n            height: 120px;\n            animation: spin 2s linear infinite;\n          }\n          @keyframes spin {\n            0% {\n              transform: rotate(0deg);\n            }\n            100% {\n              transform: rotate(360deg);\n            }\n          }\n          </style>\n          <div class=\"loader\"></div>\n        ");
            }
        }
        /** @type {?} */
        var fileUrl;
        //if (typeof this.src === "string") {
        //  fileUrl = this.src;
        //}
        if (this._src instanceof Blob) {
            fileUrl = encodeURIComponent(URL.createObjectURL(this._src));
        }
        else if (this._src instanceof Uint8Array) {
            /** @type {?} */
            var blob = new Blob([this._src], { type: "application/pdf" });
            fileUrl = encodeURIComponent(URL.createObjectURL(blob));
        }
        else {
            fileUrl = this._src;
        }
        /** @type {?} */
        var viewerUrl;
        if (this.viewerFolder) {
            viewerUrl = this.viewerFolder + "/web/viewer.html";
        }
        else {
            viewerUrl = "assets/pdfjs/web/viewer.html";
        }
        viewerUrl += "?file=" + fileUrl;
        if (typeof this.viewerId !== 'undefined') {
            viewerUrl += "&viewerId=" + this.viewerId;
        }
        if (typeof this.onBeforePrint !== 'undefined') {
            viewerUrl += "&beforePrint=true";
        }
        if (typeof this.onAfterPrint !== 'undefined') {
            viewerUrl += "&afterPrint=true";
        }
        if (typeof this.onDocumentLoad !== 'undefined') {
            viewerUrl += "&pagesLoaded=true";
        }
        if (typeof this.onPageChange !== 'undefined') {
            viewerUrl += "&pageChange=true";
        }
        if (this.downloadFileName) {
            if (!this.downloadFileName.endsWith(".pdf")) {
                this.downloadFileName += ".pdf";
            }
            viewerUrl += "&fileName=" + this.downloadFileName;
        }
        if (typeof this.openFile !== 'undefined') {
            viewerUrl += "&openFile=" + this.openFile;
        }
        if (typeof this.download !== 'undefined') {
            viewerUrl += "&download=" + this.download;
        }
        if (this.startDownload) {
            viewerUrl += "&startDownload=" + this.startDownload;
        }
        if (typeof this.viewBookmark !== 'undefined') {
            viewerUrl += "&viewBookmark=" + this.viewBookmark;
        }
        if (typeof this.print !== 'undefined') {
            viewerUrl += "&print=" + this.print;
        }
        if (this.startPrint) {
            viewerUrl += "&startPrint=" + this.startPrint;
        }
        if (typeof this.fullScreen !== 'undefined') {
            viewerUrl += "&fullScreen=" + this.fullScreen;
        }
        // if (this.showFullScreen) {
        //   viewerUrl += `&showFullScreen=${this.showFullScreen}`;
        // }
        if (typeof this.find !== 'undefined') {
            viewerUrl += "&find=" + this.find;
        }
        if (this.lastPage) {
            viewerUrl += "&lastpage=" + this.lastPage;
        }
        if (this.rotatecw) {
            viewerUrl += "&rotatecw=" + this.rotatecw;
        }
        if (this.rotateccw) {
            viewerUrl += "&rotateccw=" + this.rotateccw;
        }
        if (this.cursor) {
            viewerUrl += "&cursor=" + this.cursor;
        }
        if (this.scroll) {
            viewerUrl += "&scroll=" + this.scroll;
        }
        if (this.spread) {
            viewerUrl += "&spread=" + this.spread;
        }
        if (this.locale) {
            viewerUrl += "&locale=" + this.locale;
        }
        if (this.useOnlyCssZoom) {
            viewerUrl += "&useOnlyCssZoom=" + this.useOnlyCssZoom;
        }
        if (this._page || this.zoom || this.nameddest || this.pagemode)
            viewerUrl += "#";
        if (this._page) {
            viewerUrl += "&page=" + this._page;
        }
        if (this.zoom) {
            viewerUrl += "&zoom=" + this.zoom;
        }
        if (this.nameddest) {
            viewerUrl += "&nameddest=" + this.nameddest;
        }
        if (this.pagemode) {
            viewerUrl += "&pagemode=" + this.pagemode;
        }
        if (this.errorOverride || this.errorAppend) {
            viewerUrl += "&errorMessage=" + this.errorMessage;
            if (this.errorOverride) {
                viewerUrl += "&errorOverride=" + this.errorOverride;
            }
            if (this.errorAppend) {
                viewerUrl += "&errorAppend=" + this.errorAppend;
            }
        }
        if (this.externalWindow) {
            this.viewerTab.location.href = viewerUrl;
        }
        else {
            this.iframe.nativeElement.src = viewerUrl;
        }
        // console.log(`
        //   pdfSrc = ${this.pdfSrc}
        //   fileUrl = ${fileUrl}
        //   externalWindow = ${this.externalWindow}
        //   downloadFileName = ${this.downloadFileName}
        //   viewerFolder = ${this.viewerFolder}
        //   openFile = ${this.openFile}
        //   download = ${this.download}
        //   startDownload = ${this.startDownload}
        //   viewBookmark = ${this.viewBookmark}
        //   print = ${this.print}
        //   startPrint = ${this.startPrint}
        //   fullScreen = ${this.fullScreen}
        //   find = ${this.find}
        //   lastPage = ${this.lastPage}
        //   rotatecw = ${this.rotatecw}
        //   rotateccw = ${this.rotateccw}
        //   cursor = ${this.cursor}
        //   scrollMode = ${this.scroll}
        //   spread = ${this.spread}
        //   page = ${this.page}
        //   zoom = ${this.zoom}
        //   nameddest = ${this.nameddest}
        //   pagemode = ${this.pagemode}
        //   pagemode = ${this.errorOverride}
        //   pagemode = ${this.errorAppend}
        //   pagemode = ${this.errorMessage}
        // `);
    };
    PdfJsViewerComponent.propDecorators = {
        iframe: [{ type: ViewChild, args: ['iframe', { static: true },] }],
        viewerId: [{ type: Input }],
        onBeforePrint: [{ type: Output }],
        onAfterPrint: [{ type: Output }],
        onDocumentLoad: [{ type: Output }],
        onPageChange: [{ type: Output }],
        viewerFolder: [{ type: Input }],
        externalWindow: [{ type: Input }],
        showSpinner: [{ type: Input }],
        downloadFileName: [{ type: Input }],
        openFile: [{ type: Input }],
        download: [{ type: Input }],
        startDownload: [{ type: Input }],
        viewBookmark: [{ type: Input }],
        print: [{ type: Input }],
        startPrint: [{ type: Input }],
        fullScreen: [{ type: Input }],
        find: [{ type: Input }],
        zoom: [{ type: Input }],
        nameddest: [{ type: Input }],
        pagemode: [{ type: Input }],
        lastPage: [{ type: Input }],
        rotatecw: [{ type: Input }],
        rotateccw: [{ type: Input }],
        cursor: [{ type: Input }],
        scroll: [{ type: Input }],
        spread: [{ type: Input }],
        locale: [{ type: Input }],
        useOnlyCssZoom: [{ type: Input }],
        errorOverride: [{ type: Input }],
        errorAppend: [{ type: Input }],
        errorMessage: [{ type: Input }],
        diagnosticLogs: [{ type: Input }],
        externalWindowOptions: [{ type: Input }],
        page: [{ type: Input }],
        pdfSrc: [{ type: Input }]
    };
PdfJsViewerComponent.Éµfac = function PdfJsViewerComponent_Factory(t) { return new (t || PdfJsViewerComponent)(); };
PdfJsViewerComponent.Éµcmp = Éµngcc0.ÉµÉµdefineComponent({ type: PdfJsViewerComponent, selectors: [["ng2-pdfjs-viewer"]], viewQuery: function PdfJsViewerComponent_Query(rf, ctx) { if (rf & 1) {
        Éµngcc0.ÉµÉµviewQuery(_c0, 3);
    } if (rf & 2) {
        var _t;
        Éµngcc0.ÉµÉµqueryRefresh(_t = Éµngcc0.ÉµÉµloadQuery()) && (ctx.iframe = _t.first);
    } }, inputs: { externalWindow: "externalWindow", showSpinner: "showSpinner", openFile: "openFile", download: "download", viewBookmark: "viewBookmark", print: "print", fullScreen: "fullScreen", find: "find", useOnlyCssZoom: "useOnlyCssZoom", errorOverride: "errorOverride", errorAppend: "errorAppend", diagnosticLogs: "diagnosticLogs", page: "page", pdfSrc: "pdfSrc", viewerId: "viewerId", viewerFolder: "viewerFolder", downloadFileName: "downloadFileName", startDownload: "startDownload", startPrint: "startPrint", zoom: "zoom", nameddest: "nameddest", pagemode: "pagemode", lastPage: "lastPage", rotatecw: "rotatecw", rotateccw: "rotateccw", cursor: "cursor", scroll: "scroll", spread: "spread", locale: "locale", errorMessage: "errorMessage", externalWindowOptions: "externalWindowOptions" }, outputs: { onBeforePrint: "onBeforePrint", onAfterPrint: "onAfterPrint", onDocumentLoad: "onDocumentLoad", onPageChange: "onPageChange" }, decls: 2, vars: 1, consts: [["title", "ng2-pdfjs-viewer", "width", "100%", "height", "100%", 3, "hidden"], ["iframe", ""]], template: function PdfJsViewerComponent_Template(rf, ctx) { if (rf & 1) {
        Éµngcc0.ÉµÉµelement(0, "iframe", 0, 1);
    } if (rf & 2) {
        Éµngcc0.ÉµÉµproperty("hidden", ctx.externalWindow || !ctx.externalWindow && !ctx.pdfSrc);
    } }, encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(PdfJsViewerComponent, [{
        type: Component,
        args: [{
                selector: 'ng2-pdfjs-viewer',
                template: "<iframe title=\"ng2-pdfjs-viewer\" [hidden]=\"externalWindow || (!externalWindow && !pdfSrc)\" #iframe width=\"100%\" height=\"100%\"></iframe>"
            }]
    }], function () { return []; }, { onBeforePrint: [{
            type: Output
        }], onAfterPrint: [{
            type: Output
        }], onDocumentLoad: [{
            type: Output
        }], onPageChange: [{
            type: Output
        }], externalWindow: [{
            type: Input
        }], showSpinner: [{
            type: Input
        }], openFile: [{
            type: Input
        }], download: [{
            type: Input
        }], viewBookmark: [{
            type: Input
        }], print: [{
            type: Input
        }], fullScreen: [{
            type: Input
        }], find: [{
            type: Input
        }], useOnlyCssZoom: [{
            type: Input
        }], errorOverride: [{
            type: Input
        }], errorAppend: [{
            type: Input
        }], diagnosticLogs: [{
            type: Input
        }], page: [{
            type: Input
        }], pdfSrc: [{
            type: Input
        }], iframe: [{
            type: ViewChild,
            args: ['iframe', { static: true }]
        }], viewerId: [{
            type: Input
        }], viewerFolder: [{
            type: Input
        }], downloadFileName: [{
            type: Input
        }], startDownload: [{
            type: Input
        }], startPrint: [{
            type: Input
        }], zoom: [{
            type: Input
        }], nameddest: [{
            type: Input
        }], pagemode: [{
            type: Input
        }], lastPage: [{
            type: Input
        }], rotatecw: [{
            type: Input
        }], rotateccw: [{
            type: Input
        }], cursor: [{
            type: Input
        }], scroll: [{
            type: Input
        }], spread: [{
            type: Input
        }], locale: [{
            type: Input
        }], errorMessage: [{
            type: Input
        }], externalWindowOptions: [{
            type: Input
        }] }); })();
    return PdfJsViewerComponent;
}());

/**
 * @fileoverview added by tsickle
 * Generated from: index.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
var PdfJsViewerModule = /** @class */ (function () {
    function PdfJsViewerModule() {
    }
    /**
     * @return {?}
     */
    PdfJsViewerModule.forRoot = /**
     * @return {?}
     */
    function () {
        return {
            ngModule: PdfJsViewerModule
        };
    };
PdfJsViewerModule.Éµfac = function PdfJsViewerModule_Factory(t) { return new (t || PdfJsViewerModule)(); };
PdfJsViewerModule.Éµmod = Éµngcc0.ÉµÉµdefineNgModule({ type: PdfJsViewerModule });
PdfJsViewerModule.Éµinj = Éµngcc0.ÉµÉµdefineInjector({ imports: [[
            CommonModule
        ]] });
(function () { (typeof ngJitMode === "undefined" || ngJitMode) && Éµngcc0.ÉµÉµsetNgModuleScope(PdfJsViewerModule, { declarations: function () { return [PdfJsViewerComponent]; }, imports: function () { return [CommonModule]; }, exports: function () { return [PdfJsViewerComponent]; } }); })();
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && Éµngcc0.ÉµsetClassMetadata(PdfJsViewerModule, [{
        type: NgModule,
        args: [{
                imports: [
                    CommonModule
                ],
                declarations: [
                    PdfJsViewerComponent
                ],
                exports: [
                    PdfJsViewerComponent
                ]
            }]
    }], function () { return []; }, null); })();
    return PdfJsViewerModule;
}());

export { PdfJsViewerModule, PdfJsViewerComponent };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQU1NO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztnREFhTTtBQUNOO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3Q2hpbGQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IGFkZGVkIGJ5IHRzaWNrbGVcclxuICogR2VuZXJhdGVkIGZyb206IG5nMi1wZGZqcy12aWV3ZXIuY29tcG9uZW50LnRzXHJcbiAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlcyxjb25zdGFudFByb3BlcnR5LGV4dHJhUmVxdWlyZSxtaXNzaW5nT3ZlcnJpZGUsbWlzc2luZ1JlcXVpcmUsbWlzc2luZ1JldHVybix1bnVzZWRQcml2YXRlTWVtYmVycyx1c2VsZXNzQ29kZX0gY2hlY2tlZCBieSB0c2NcclxuICovXHJcbnZhciBQZGZKc1ZpZXdlckNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBkZkpzVmlld2VyQ29tcG9uZW50KCkge1xyXG4gICAgICAgIHRoaXMub25CZWZvcmVQcmludCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLm9uQWZ0ZXJQcmludCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcclxuICAgICAgICB0aGlzLm9uRG9jdW1lbnRMb2FkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMub25QYWdlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG4gICAgICAgIHRoaXMuZXh0ZXJuYWxXaW5kb3cgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNob3dTcGlubmVyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9wZW5GaWxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRvd25sb2FkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnZpZXdCb29rbWFyayA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5wcmludCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5mdWxsU2NyZWVuID0gdHJ1ZTtcclxuICAgICAgICAvL0BJbnB1dCgpIHB1YmxpYyBzaG93RnVsbFNjcmVlbjogYm9vbGVhbjtcclxuICAgICAgICB0aGlzLmZpbmQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudXNlT25seUNzc1pvb20gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVycm9yT3ZlcnJpZGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVycm9yQXBwZW5kID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmRpYWdub3N0aWNMb2dzID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQZGZKc1ZpZXdlckNvbXBvbmVudC5wcm90b3R5cGUsIFwicGFnZVwiLCB7XHJcbiAgICAgICAgZ2V0OiAvKipcclxuICAgICAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuUERGVmlld2VyQXBwbGljYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLlBERlZpZXdlckFwcGxpY2F0aW9uLnBhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaWFnbm9zdGljTG9ncylcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJEb2N1bWVudCBpcyBub3QgbG9hZGVkIHlldCEhIS4gVHJ5IHRvIHJldHJpZXZlIHBhZ2UjIGFmdGVyIGZ1bGwgbG9hZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHs/fSBfcGFnZVxyXG4gICAgICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gKF9wYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhZ2UgPSBfcGFnZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuUERGVmlld2VyQXBwbGljYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuUERGVmlld2VyQXBwbGljYXRpb24ucGFnZSA9IHRoaXMuX3BhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaWFnbm9zdGljTG9ncylcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJEb2N1bWVudCBpcyBub3QgbG9hZGVkIHlldCEhIS4gVHJ5IHRvIHNldCBwYWdlIyBhZnRlciBmdWxsIGxvYWQuIElnbm9yZSB0aGlzIHdhcm5pbmcgaWYgeW91IGFyZSBub3Qgc2V0dGluZyBwYWdlIyB1c2luZyAnLicgbm90YXRpb24uIChFLmcuIHBkZlZpZXdlci5wYWdlID0gNTspXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFBkZkpzVmlld2VyQ29tcG9uZW50LnByb3RvdHlwZSwgXCJwZGZTcmNcIiwge1xyXG4gICAgICAgIGdldDogLyoqXHJcbiAgICAgICAgICogQHJldHVybiB7P31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zcmM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7P30gX3NyY1xyXG4gICAgICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gKF9zcmMpIHtcclxuICAgICAgICAgICAgdGhpcy5fc3JjID0gX3NyYztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUGRmSnNWaWV3ZXJDb21wb25lbnQucHJvdG90eXBlLCBcIlBERlZpZXdlckFwcGxpY2F0aW9uT3B0aW9uc1wiLCB7XHJcbiAgICAgICAgZ2V0OiAvKipcclxuICAgICAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICB2YXIgcGRmVmlld2VyT3B0aW9ucyA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4dGVybmFsV2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3ZXJUYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICBwZGZWaWV3ZXJPcHRpb25zID0gdGhpcy52aWV3ZXJUYWIuUERGVmlld2VyQXBwbGljYXRpb25PcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaWZyYW1lLm5hdGl2ZUVsZW1lbnQuY29udGVudFdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBkZlZpZXdlck9wdGlvbnMgPSB0aGlzLmlmcmFtZS5uYXRpdmVFbGVtZW50LmNvbnRlbnRXaW5kb3cuUERGVmlld2VyQXBwbGljYXRpb25PcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwZGZWaWV3ZXJPcHRpb25zO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShQZGZKc1ZpZXdlckNvbXBvbmVudC5wcm90b3R5cGUsIFwiUERGVmlld2VyQXBwbGljYXRpb25cIiwge1xyXG4gICAgICAgIGdldDogLyoqXHJcbiAgICAgICAgICogQHJldHVybiB7P31cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgdmFyIHBkZlZpZXdlciA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmV4dGVybmFsV2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3ZXJUYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICBwZGZWaWV3ZXIgPSB0aGlzLnZpZXdlclRhYi5QREZWaWV3ZXJBcHBsaWNhdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlmcmFtZS5uYXRpdmVFbGVtZW50LmNvbnRlbnRXaW5kb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICBwZGZWaWV3ZXIgPSB0aGlzLmlmcmFtZS5uYXRpdmVFbGVtZW50LmNvbnRlbnRXaW5kb3cuUERGVmlld2VyQXBwbGljYXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBkZlZpZXdlcjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7P30gdmlld2VyRXZlbnRcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIFBkZkpzVmlld2VyQ29tcG9uZW50LnByb3RvdHlwZS5yZWNlaXZlTWVzc2FnZSA9IC8qKlxyXG4gICAgICogQHBhcmFtIHs/fSB2aWV3ZXJFdmVudFxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gKHZpZXdlckV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHZpZXdlckV2ZW50LmRhdGEgJiYgdmlld2VyRXZlbnQuZGF0YS52aWV3ZXJJZCAmJiB2aWV3ZXJFdmVudC5kYXRhLmV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgdmFyIHZpZXdlcklkID0gdmlld2VyRXZlbnQuZGF0YS52aWV3ZXJJZDtcclxuICAgICAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IHZpZXdlckV2ZW50LmRhdGEuZXZlbnQ7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgdmFyIHBhcmFtID0gdmlld2VyRXZlbnQuZGF0YS5wYXJhbTtcclxuICAgICAgICAgICAgaWYgKHRoaXMudmlld2VySWQgPT0gdmlld2VySWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uQmVmb3JlUHJpbnQgJiYgZXZlbnRfMSA9PSBcImJlZm9yZVByaW50XCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQmVmb3JlUHJpbnQuZW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vbkFmdGVyUHJpbnQgJiYgZXZlbnRfMSA9PSBcImFmdGVyUHJpbnRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25BZnRlclByaW50LmVtaXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMub25Eb2N1bWVudExvYWQgJiYgZXZlbnRfMSA9PSBcInBhZ2VzTG9hZGVkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRG9jdW1lbnRMb2FkLmVtaXQocGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5vblBhZ2VDaGFuZ2UgJiYgZXZlbnRfMSA9PSBcInBhZ2VDaGFuZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25QYWdlQ2hhbmdlLmVtaXQocGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgUGRmSnNWaWV3ZXJDb21wb25lbnQucHJvdG90eXBlLm5nT25Jbml0ID0gLyoqXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIHRoaXMucmVjZWl2ZU1lc3NhZ2UuYmluZCh0aGlzKSwgZmFsc2UpO1xyXG4gICAgICAgIGlmICghdGhpcy5leHRlcm5hbFdpbmRvdykgeyAvLyBMb2FkIHBkZiBmb3IgZW1iZWRkZWQgdmlld3NcclxuICAgICAgICAgICAgdGhpcy5sb2FkUGRmKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybiB7P31cclxuICAgICAqL1xyXG4gICAgUGRmSnNWaWV3ZXJDb21wb25lbnQucHJvdG90eXBlLnJlZnJlc2ggPSAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmxvYWRQZGYoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcmV0dXJuIHs/fVxyXG4gICAgICovXHJcbiAgICBQZGZKc1ZpZXdlckNvbXBvbmVudC5wcm90b3R5cGUubG9hZFBkZiA9IC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3NyYykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBUYWIgaXMgLSAke3RoaXMudmlld2VyVGFifWApO1xyXG4gICAgICAgIC8vIGlmICh0aGlzLnZpZXdlclRhYikge1xyXG4gICAgICAgIC8vICAgY29uc29sZS5sb2coYFN0YXR1cyBvZiB3aW5kb3cgLSAke3RoaXMudmlld2VyVGFiLmNsb3NlZH1gKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKHRoaXMuZXh0ZXJuYWxXaW5kb3cgJiYgKHR5cGVvZiB0aGlzLnZpZXdlclRhYiA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy52aWV3ZXJUYWIuY2xvc2VkKSkge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlclRhYiA9IHdpbmRvdy5vcGVuKCcnLCAnX2JsYW5rJywgdGhpcy5leHRlcm5hbFdpbmRvd09wdGlvbnMgfHwgJycpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy52aWV3ZXJUYWIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlhZ25vc3RpY0xvZ3MpXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIm5nMi1wZGZqcy12aWV3ZXI6IEZvciAnZXh0ZXJuYWxXaW5kb3cgPSB0cnVlJy4gaS5lIG9wZW5pbmcgaW4gbmV3IHRhYiB0byB3b3JrLCBwb3AtdXBzIHNob3VsZCBiZSBlbmFibGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93U3Bpbm5lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3ZXJUYWIuZG9jdW1lbnQud3JpdGUoXCJcXG4gICAgICAgICAgPHN0eWxlPlxcbiAgICAgICAgICAubG9hZGVyIHtcXG4gICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XFxuICAgICAgICAgICAgbGVmdDogNDAlO1xcbiAgICAgICAgICAgIHRvcDogNDAlO1xcbiAgICAgICAgICAgIGJvcmRlcjogMTZweCBzb2xpZCAjZjNmM2YzO1xcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcXG4gICAgICAgICAgICBib3JkZXItdG9wOiAxNnB4IHNvbGlkICMzNDk4ZGI7XFxuICAgICAgICAgICAgd2lkdGg6IDEyMHB4O1xcbiAgICAgICAgICAgIGhlaWdodDogMTIwcHg7XFxuICAgICAgICAgICAgYW5pbWF0aW9uOiBzcGluIDJzIGxpbmVhciBpbmZpbml0ZTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xcbiAgICAgICAgICAgIDAlIHtcXG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAxMDAlIHtcXG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9XFxuICAgICAgICAgIDwvc3R5bGU+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxvYWRlclxcXCI+PC9kaXY+XFxuICAgICAgICBcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgIHZhciBmaWxlVXJsO1xyXG4gICAgICAgIC8vaWYgKHR5cGVvZiB0aGlzLnNyYyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgIC8vICBmaWxlVXJsID0gdGhpcy5zcmM7XHJcbiAgICAgICAgLy99XHJcbiAgICAgICAgaWYgKHRoaXMuX3NyYyBpbnN0YW5jZW9mIEJsb2IpIHtcclxuICAgICAgICAgICAgZmlsZVVybCA9IGVuY29kZVVSSUNvbXBvbmVudChVUkwuY3JlYXRlT2JqZWN0VVJMKHRoaXMuX3NyYykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLl9zcmMgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi9cclxuICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbdGhpcy5fc3JjXSwgeyB0eXBlOiBcImFwcGxpY2F0aW9uL3BkZlwiIH0pO1xyXG4gICAgICAgICAgICBmaWxlVXJsID0gZW5jb2RlVVJJQ29tcG9uZW50KFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZmlsZVVybCA9IHRoaXMuX3NyYztcclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqIEB0eXBlIHs/fSAqL1xyXG4gICAgICAgIHZhciB2aWV3ZXJVcmw7XHJcbiAgICAgICAgaWYgKHRoaXMudmlld2VyRm9sZGVyKSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCA9IHRoaXMudmlld2VyRm9sZGVyICsgXCIvd2ViL3ZpZXdlci5odG1sXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgPSBcImFzc2V0cy9wZGZqcy93ZWIvdmlld2VyLmh0bWxcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmlld2VyVXJsICs9IFwiP2ZpbGU9XCIgKyBmaWxlVXJsO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy52aWV3ZXJJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJnZpZXdlcklkPVwiICsgdGhpcy52aWV3ZXJJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uQmVmb3JlUHJpbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCArPSBcIiZiZWZvcmVQcmludD10cnVlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkFmdGVyUHJpbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCArPSBcIiZhZnRlclByaW50PXRydWVcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRG9jdW1lbnRMb2FkICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImcGFnZXNMb2FkZWQ9dHJ1ZVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub25QYWdlQ2hhbmdlICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImcGFnZUNoYW5nZT10cnVlXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRvd25sb2FkRmlsZU5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRvd25sb2FkRmlsZU5hbWUuZW5kc1dpdGgoXCIucGRmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRvd25sb2FkRmlsZU5hbWUgKz0gXCIucGRmXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJmZpbGVOYW1lPVwiICsgdGhpcy5kb3dubG9hZEZpbGVOYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3BlbkZpbGUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCArPSBcIiZvcGVuRmlsZT1cIiArIHRoaXMub3BlbkZpbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5kb3dubG9hZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJmRvd25sb2FkPVwiICsgdGhpcy5kb3dubG9hZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhcnREb3dubG9hZCkge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImc3RhcnREb3dubG9hZD1cIiArIHRoaXMuc3RhcnREb3dubG9hZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnZpZXdCb29rbWFyayAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJnZpZXdCb29rbWFyaz1cIiArIHRoaXMudmlld0Jvb2ttYXJrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJpbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCArPSBcIiZwcmludD1cIiArIHRoaXMucHJpbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXJ0UHJpbnQpIHtcclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJnN0YXJ0UHJpbnQ9XCIgKyB0aGlzLnN0YXJ0UHJpbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5mdWxsU2NyZWVuICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImZnVsbFNjcmVlbj1cIiArIHRoaXMuZnVsbFNjcmVlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuc2hvd0Z1bGxTY3JlZW4pIHtcclxuICAgICAgICAvLyAgIHZpZXdlclVybCArPSBgJnNob3dGdWxsU2NyZWVuPSR7dGhpcy5zaG93RnVsbFNjcmVlbn1gO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZmluZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJmZpbmQ9XCIgKyB0aGlzLmZpbmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxhc3RQYWdlKSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCArPSBcIiZsYXN0cGFnZT1cIiArIHRoaXMubGFzdFBhZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJvdGF0ZWN3KSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCArPSBcIiZyb3RhdGVjdz1cIiArIHRoaXMucm90YXRlY3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJvdGF0ZWNjdykge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImcm90YXRlY2N3PVwiICsgdGhpcy5yb3RhdGVjY3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmN1cnNvcikge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImY3Vyc29yPVwiICsgdGhpcy5jdXJzb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNjcm9sbCkge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImc2Nyb2xsPVwiICsgdGhpcy5zY3JvbGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNwcmVhZCkge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImc3ByZWFkPVwiICsgdGhpcy5zcHJlYWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmxvY2FsZSkge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImbG9jYWxlPVwiICsgdGhpcy5sb2NhbGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnVzZU9ubHlDc3Nab29tKSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCArPSBcIiZ1c2VPbmx5Q3NzWm9vbT1cIiArIHRoaXMudXNlT25seUNzc1pvb207XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9wYWdlIHx8IHRoaXMuem9vbSB8fCB0aGlzLm5hbWVkZGVzdCB8fCB0aGlzLnBhZ2Vtb2RlKVxyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCIjXCI7XHJcbiAgICAgICAgaWYgKHRoaXMuX3BhZ2UpIHtcclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJnBhZ2U9XCIgKyB0aGlzLl9wYWdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy56b29tKSB7XHJcbiAgICAgICAgICAgIHZpZXdlclVybCArPSBcIiZ6b29tPVwiICsgdGhpcy56b29tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5uYW1lZGRlc3QpIHtcclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJm5hbWVkZGVzdD1cIiArIHRoaXMubmFtZWRkZXN0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYWdlbW9kZSkge1xyXG4gICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImcGFnZW1vZGU9XCIgKyB0aGlzLnBhZ2Vtb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5lcnJvck92ZXJyaWRlIHx8IHRoaXMuZXJyb3JBcHBlbmQpIHtcclxuICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJmVycm9yTWVzc2FnZT1cIiArIHRoaXMuZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5lcnJvck92ZXJyaWRlKSB7XHJcbiAgICAgICAgICAgICAgICB2aWV3ZXJVcmwgKz0gXCImZXJyb3JPdmVycmlkZT1cIiArIHRoaXMuZXJyb3JPdmVycmlkZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5lcnJvckFwcGVuZCkge1xyXG4gICAgICAgICAgICAgICAgdmlld2VyVXJsICs9IFwiJmVycm9yQXBwZW5kPVwiICsgdGhpcy5lcnJvckFwcGVuZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5leHRlcm5hbFdpbmRvdykge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdlclRhYi5sb2NhdGlvbi5ocmVmID0gdmlld2VyVXJsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pZnJhbWUubmF0aXZlRWxlbWVudC5zcmMgPSB2aWV3ZXJVcmw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBcclxuICAgICAgICAvLyAgIHBkZlNyYyA9ICR7dGhpcy5wZGZTcmN9XHJcbiAgICAgICAgLy8gICBmaWxlVXJsID0gJHtmaWxlVXJsfVxyXG4gICAgICAgIC8vICAgZXh0ZXJuYWxXaW5kb3cgPSAke3RoaXMuZXh0ZXJuYWxXaW5kb3d9XHJcbiAgICAgICAgLy8gICBkb3dubG9hZEZpbGVOYW1lID0gJHt0aGlzLmRvd25sb2FkRmlsZU5hbWV9XHJcbiAgICAgICAgLy8gICB2aWV3ZXJGb2xkZXIgPSAke3RoaXMudmlld2VyRm9sZGVyfVxyXG4gICAgICAgIC8vICAgb3BlbkZpbGUgPSAke3RoaXMub3BlbkZpbGV9XHJcbiAgICAgICAgLy8gICBkb3dubG9hZCA9ICR7dGhpcy5kb3dubG9hZH1cclxuICAgICAgICAvLyAgIHN0YXJ0RG93bmxvYWQgPSAke3RoaXMuc3RhcnREb3dubG9hZH1cclxuICAgICAgICAvLyAgIHZpZXdCb29rbWFyayA9ICR7dGhpcy52aWV3Qm9va21hcmt9XHJcbiAgICAgICAgLy8gICBwcmludCA9ICR7dGhpcy5wcmludH1cclxuICAgICAgICAvLyAgIHN0YXJ0UHJpbnQgPSAke3RoaXMuc3RhcnRQcmludH1cclxuICAgICAgICAvLyAgIGZ1bGxTY3JlZW4gPSAke3RoaXMuZnVsbFNjcmVlbn1cclxuICAgICAgICAvLyAgIGZpbmQgPSAke3RoaXMuZmluZH1cclxuICAgICAgICAvLyAgIGxhc3RQYWdlID0gJHt0aGlzLmxhc3RQYWdlfVxyXG4gICAgICAgIC8vICAgcm90YXRlY3cgPSAke3RoaXMucm90YXRlY3d9XHJcbiAgICAgICAgLy8gICByb3RhdGVjY3cgPSAke3RoaXMucm90YXRlY2N3fVxyXG4gICAgICAgIC8vICAgY3Vyc29yID0gJHt0aGlzLmN1cnNvcn1cclxuICAgICAgICAvLyAgIHNjcm9sbE1vZGUgPSAke3RoaXMuc2Nyb2xsfVxyXG4gICAgICAgIC8vICAgc3ByZWFkID0gJHt0aGlzLnNwcmVhZH1cclxuICAgICAgICAvLyAgIHBhZ2UgPSAke3RoaXMucGFnZX1cclxuICAgICAgICAvLyAgIHpvb20gPSAke3RoaXMuem9vbX1cclxuICAgICAgICAvLyAgIG5hbWVkZGVzdCA9ICR7dGhpcy5uYW1lZGRlc3R9XHJcbiAgICAgICAgLy8gICBwYWdlbW9kZSA9ICR7dGhpcy5wYWdlbW9kZX1cclxuICAgICAgICAvLyAgIHBhZ2Vtb2RlID0gJHt0aGlzLmVycm9yT3ZlcnJpZGV9XHJcbiAgICAgICAgLy8gICBwYWdlbW9kZSA9ICR7dGhpcy5lcnJvckFwcGVuZH1cclxuICAgICAgICAvLyAgIHBhZ2Vtb2RlID0gJHt0aGlzLmVycm9yTWVzc2FnZX1cclxuICAgICAgICAvLyBgKTtcclxuICAgIH07XHJcbiAgICBQZGZKc1ZpZXdlckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xyXG4gICAgICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmcyLXBkZmpzLXZpZXdlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGlmcmFtZSB0aXRsZT1cXFwibmcyLXBkZmpzLXZpZXdlclxcXCIgW2hpZGRlbl09XFxcImV4dGVybmFsV2luZG93IHx8ICghZXh0ZXJuYWxXaW5kb3cgJiYgIXBkZlNyYylcXFwiICNpZnJhbWUgd2lkdGg9XFxcIjEwMCVcXFwiIGhlaWdodD1cXFwiMTAwJVxcXCI+PC9pZnJhbWU+XCJcclxuICAgICAgICAgICAgICAgIH0sXSB9XHJcbiAgICBdO1xyXG4gICAgUGRmSnNWaWV3ZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XHJcbiAgICAgICAgaWZyYW1lOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnaWZyYW1lJywgeyBzdGF0aWM6IHRydWUgfSxdIH1dLFxyXG4gICAgICAgIHZpZXdlcklkOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBvbkJlZm9yZVByaW50OiBbeyB0eXBlOiBPdXRwdXQgfV0sXHJcbiAgICAgICAgb25BZnRlclByaW50OiBbeyB0eXBlOiBPdXRwdXQgfV0sXHJcbiAgICAgICAgb25Eb2N1bWVudExvYWQ6IFt7IHR5cGU6IE91dHB1dCB9XSxcclxuICAgICAgICBvblBhZ2VDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XSxcclxuICAgICAgICB2aWV3ZXJGb2xkZXI6IFt7IHR5cGU6IElucHV0IH1dLFxyXG4gICAgICAgIGV4dGVybmFsV2luZG93OiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBzaG93U3Bpbm5lcjogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgZG93bmxvYWRGaWxlTmFtZTogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgb3BlbkZpbGU6IFt7IHR5cGU6IElucHV0IH1dLFxyXG4gICAgICAgIGRvd25sb2FkOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBzdGFydERvd25sb2FkOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICB2aWV3Qm9va21hcms6IFt7IHR5cGU6IElucHV0IH1dLFxyXG4gICAgICAgIHByaW50OiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBzdGFydFByaW50OiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBmdWxsU2NyZWVuOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBmaW5kOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICB6b29tOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBuYW1lZGRlc3Q6IFt7IHR5cGU6IElucHV0IH1dLFxyXG4gICAgICAgIHBhZ2Vtb2RlOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBsYXN0UGFnZTogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgcm90YXRlY3c6IFt7IHR5cGU6IElucHV0IH1dLFxyXG4gICAgICAgIHJvdGF0ZWNjdzogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgY3Vyc29yOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICBzY3JvbGw6IFt7IHR5cGU6IElucHV0IH1dLFxyXG4gICAgICAgIHNwcmVhZDogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgbG9jYWxlOiBbeyB0eXBlOiBJbnB1dCB9XSxcclxuICAgICAgICB1c2VPbmx5Q3NzWm9vbTogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgZXJyb3JPdmVycmlkZTogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgZXJyb3JBcHBlbmQ6IFt7IHR5cGU6IElucHV0IH1dLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgZGlhZ25vc3RpY0xvZ3M6IFt7IHR5cGU6IElucHV0IH1dLFxyXG4gICAgICAgIGV4dGVybmFsV2luZG93T3B0aW9uczogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgcGFnZTogW3sgdHlwZTogSW5wdXQgfV0sXHJcbiAgICAgICAgcGRmU3JjOiBbeyB0eXBlOiBJbnB1dCB9XVxyXG4gICAgfTtcclxuICAgIHJldHVybiBQZGZKc1ZpZXdlckNvbXBvbmVudDtcclxufSgpKTtcblxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxyXG4gKiBHZW5lcmF0ZWQgZnJvbTogaW5kZXgudHNcclxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzLGNvbnN0YW50UHJvcGVydHksZXh0cmFSZXF1aXJlLG1pc3NpbmdPdmVycmlkZSxtaXNzaW5nUmVxdWlyZSxtaXNzaW5nUmV0dXJuLHVudXNlZFByaXZhdGVNZW1iZXJzLHVzZWxlc3NDb2RlfSBjaGVja2VkIGJ5IHRzY1xyXG4gKi9cclxudmFyIFBkZkpzVmlld2VyTW9kdWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGRmSnNWaWV3ZXJNb2R1bGUoKSB7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIFBkZkpzVmlld2VyTW9kdWxlLmZvclJvb3QgPSAvKipcclxuICAgICAqIEByZXR1cm4gez99XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuZ01vZHVsZTogUGRmSnNWaWV3ZXJNb2R1bGVcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFBkZkpzVmlld2VyTW9kdWxlLmRlY29yYXRvcnMgPSBbXHJcbiAgICAgICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcclxuICAgICAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZVxyXG4gICAgICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBkZkpzVmlld2VyQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgICAgICBleHBvcnRzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBkZkpzVmlld2VyQ29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxdIH1cclxuICAgIF07XHJcbiAgICByZXR1cm4gUGRmSnNWaWV3ZXJNb2R1bGU7XHJcbn0oKSk7XG5cbmV4cG9ydCB7IFBkZkpzVmlld2VyTW9kdWxlLCBQZGZKc1ZpZXdlckNvbXBvbmVudCB9O1xuIl19